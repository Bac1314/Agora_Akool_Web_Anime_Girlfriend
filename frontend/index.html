<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>バーチャル彼女 - Virtual Girlfriend</title>
    <link rel="stylesheet" href="styles/main.css">
    <script src="/lib/agora-rtc-sdk-ng/AgoraRTC_N-production.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Full-Screen Avatar Background -->
        <div class="avatar-fullscreen" id="avatarContainer">
            <div class="avatar-placeholder" id="avatarPlaceholder">
                <div class="loader"></div>
                <p data-i18n="avatarLoading">彼女を呼んでいます...</p>
            </div>
            <div class="avatar-video" id="avatarVideo" style="display: none;"></div>
        </div>

        <!-- Top Status Bar -->
        <div class="status-overlay">
            <div class="status-left">
<div class="app-title" data-i18n="title">バーチャル彼女</div>
            </div>
            <div class="status-right">
                <div class="status-item" id="connectionStatus">
                    <span class="status-dot offline"></span>
                </div>
                <button class="btn-icon" id="languageBtn" title="Language">
                    🌐
                </button>
                <button class="btn-icon" id="settingsBtn" title="Settings">
                    ⚙
                </button>
            </div>
        </div>

        <!-- Chat Overlay (Bottom) -->
        <div class="chat-overlay" id="chatOverlay">
            <!-- Chat Toggle Button -->
            <button class="chat-toggle" id="chatToggle">
                <span class="chat-icon">💬</span>
<span class="chat-text" data-i18n="chat">チャット</span>
            </button>

            <!-- Chat Panel -->
            <div class="chat-panel" id="chatPanel">
                <div class="chat-header">
<div class="chat-title" data-i18n="chat">チャット</div>
                    <div class="chat-actions">
<button class="btn-mini" id="clearChatBtn" data-i18n="clear">クリア</button>
                        <button class="btn-mini" id="closeChatBtn">×</button>
                    </div>
                </div>
                
                <div class="chat-messages" id="chatMessages">
                    <div class="message system">
                        <div class="message-content">
<p data-i18n="welcomeMessage">こんにちは！私があなたの彼女よ♪ 今日はどうしたの？</p>
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <div class="input-group">
                        <input 
                            type="text" 
                            id="messageInput" 
data-i18n="messagePlaceholder"
                            placeholder="メッセージを入力してね...♪" 
                            disabled
                        >
                        <button class="btn-send" id="sendBtn" disabled>
                            →
                        </button>
                    </div>
                    <div class="typing-indicator" id="typingIndicator" style="display: none;">
<span data-i18n="responding">彼女が返事を考えています...</span>
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Bar (Bottom Center) -->
        <div class="control-bar">
            <button class="btn-control btn-call" id="callBtn" data-state="start">
                <div class="control-icon" id="callIcon">
                    <img src="/src/assets/call.svg" alt="Start Call" class="icon-svg" id="callIconImg">
                </div>
                <div class="control-text" id="callText" data-i18n="startCall">通話開始</div>
            </button>
            <button class="btn-control btn-mute" id="muteBtn" disabled>
                <div class="control-icon" id="muteIcon">
                    <img src="/src/assets/microphone.svg" alt="Mute Audio" class="icon-svg">
                    <div class="mute-overlay" id="muteOverlay" style="display: none;"></div>
                </div>
            </button>
            <button class="btn-control btn-video-mute" id="videoMuteBtn" disabled>
                <div class="control-icon" id="videoMuteIcon">
                    <img src="/src/assets/webcam.svg" alt="Mute Video" class="icon-svg">
                    <div class="mute-overlay" id="videoMuteOverlay" style="display: none;"></div>
                </div>
            </button>
        </div>

        <!-- Settings Modal -->
        <div class="modal-overlay" id="settingsModal" style="display: none;">
            <div class="modal">
                <div class="modal-header">
<h2 data-i18n="settings">設定</h2>
                    <button class="btn-close" id="closeSettingsBtn">×</button>
                </div>
                <div class="modal-body">
                    <div class="setting-group">
<label for="channelName" data-i18n="roomName">ルーム名:</label>
                        <input type="text" id="channelName" value="virtual-girlfriend-room">
                    </div>
                    <div class="setting-group">
<label for="userName" data-i18n="yourName">あなたの名前:</label>
                        <input type="text" id="userName" value="User" data-i18n="namePlaceholder" placeholder="名前を入力してください">
                    </div>
                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="enableVoice" checked>
                            <span class="checkmark"></span>
<span data-i18n="enableVoice">音声チャットを有効にする</span>
                        </label>
                    </div>
                    <div class="setting-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="enableAvatar" checked>
                            <span class="checkmark"></span>
<span data-i18n="enableVideo">ビデオ通話を有効にする</span>
                        </label>
                    </div>
                    <div class="setting-group">
                        <label for="languageSelect" data-i18n="language">言語:</label>
                        <select id="languageSelect" class="language-select">
                            <option value="ja">🇯🇵 日本語</option>
                            <option value="en">🇺🇸 English</option>
                            <option value="ko">🇰🇷 한국어</option>
                            <option value="zh">🇨🇳 中文</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
<button class="btn btn-secondary" id="cancelSettingsBtn" data-i18n="cancel">キャンセル</button>
                    <button class="btn btn-primary" id="saveSettingsBtn" data-i18n="save">保存</button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-content">
                <div class="loader"></div>
                <p data-i18n="connecting">彼女に接続しています...</p>
            </div>
        </div>
        
        <!-- Language Selector Modal -->
        <div class="modal-overlay" id="languageModal" style="display: none;">
            <div class="modal language-modal">
                <div class="modal-header">
                    <h2 data-i18n="language">Language</h2>
                    <button class="btn-close" id="closeLanguageBtn">×</button>
                </div>
                <div class="modal-body">
                    <div class="language-options">
                        <div class="language-option" data-lang="ja">
                            <span class="flag">🇯🇵</span>
                            <span class="name">日本語</span>
                        </div>
                        <div class="language-option" data-lang="en">
                            <span class="flag">🇺🇸</span>
                            <span class="name">English</span>
                        </div>
                        <div class="language-option" data-lang="ko">
                            <span class="flag">🇰🇷</span>
                            <span class="name">한국어</span>
                        </div>
                        <div class="language-option" data-lang="zh">
                            <span class="flag">🇨🇳</span>
                            <span class="name">中文</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="utils/i18n.js"></script>
    <script src="utils/config.js"></script>
    <script src="utils/agoraManager.js"></script>
    <script src="utils/avatarManager.js"></script>
    <script src="components/chat.js"></script>
    <script src="components/controls.js"></script>
    <script src="components/language.js"></script>
    <script src="main.js"></script>
</body>
</html>